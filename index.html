<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Salesforce Chatbot Tester</title>
</head>
<body>
  <h1>Salesforce Embedded Messaging â€“ MembershipNumber tester</h1>
  <p>Enter Membership number to preload in the chat.</p>

  <label for="membershipInput">Membership Number:</label>
  <input type="text" id="membershipInput" value="9897960067" />
  <button id="loadButton" onclick="loadBot()">Load Chatbot</button>

  <script type="text/javascript">
    function loadBot() {
      const loadButton = document.getElementById('loadButton');
      const membershipNumber = document.getElementById('membershipInput').value;

      window.onEmbeddedMessagingReady = () => {
        embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
          "MembershipNumber": membershipNumber
        });
      };

      try {
        embeddedservice_bootstrap.settings.language = 'en_US';

        embeddedservice_bootstrap.init(
          '00DQz000004pGwT',
          'Chatbot',
          'https://collinsonlifestyle2023--cdc.sandbox.my.site.com/ESWGitHubTest1752671269272',
          {
            scrt2URL: 'https://collinsonlifestyle2023--cdc.sandbox.my.salesforce-scrt.com'
          }
        );

        loadButton.disabled = true;
        loadButton.innerText = 'Chatbot loaded';

      } catch (err) {
        console.error('Error loading Embedded Messaging:', err);
      }

      const script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = 'https://collinsonlifestyle2023--cdc.sandbox.my.site.com/ESWGitHubTest1752671269272/assets/js/bootstrap.min.js';
      document.body.appendChild(script);
    }
  </script>
</body>
</html>
